{% extends "profile.html" %}
{% block page_title %}{{ user.username }}'s Posts{% endblock %}
{% load gravatar %}

{% block profile_content %}
  <section class="col-md-11">
    <h1 class="brand-text-profile-header">{{ user.username }}'s Posts</h1>
    <div class="top-buffer">
      {% if posts %}
        {% for post in posts %}
          <article class="col-md-12 article-background">
            <div class="row">
              {% if post.image %}
                <figure class="col-xs-0 col-sm-3 news-figure">
                  <img src="/media/{{ post.image }}" class="news-image img-responsive tablet-hidden">
                </figure>
              {% endif %}
              <div class="col-xs-12 col-sm-9">
                <h5 class="tag-headline">{{ post.tag }}
                  <h2 class="post-headline"><a href="{% url 'post-content' post.slug %}" class="news-anchor">{{ post.title }}</a></h2>
                </h5>
                <p>{{ post.content | truncatewords:25 }}</p>
                <div class="bottom-news-buffer">
                  {% if post.author.profile.profile_pic %}
                    <img src="/media/{{ post.author.profile.profile_pic }}" class="news-profile-image img-circle">
                  {% else %}
                    <img src="{% gravatar_url post.author.email %}" class="news-profile-image img-circle">
                  {% endif %}
                  <span class="mina-text">BY {{ post.author.first_name }} | {{ post.published_date }}</span>
                </div>
              </div>
            </div>
          </article>
        {% endfor %}
        <div class="pagination">
          <span class="step-links">
            {% if posts.has_previous %}
              <a href="?page=1" class="mina-text custom-anchor">&laquo; first</a>
              <span>|</span>
              <a href="?page={{ posts.previous_page_number }}" class="mina-text custom-anchor">previous</a>
            {% endif %}

            <span class="current mina-text">
              Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
            </span>

            {% if posts.has_next %}
              <a href="?page={{ posts.next_page_number }}" class="mina-text custom-anchor">next</a>
              <span>|</span>
              <a href="?page={{ posts.paginator.num_pages }}" class="mina-text custom-anchor">last &raquo;</a>
            {% endif %}
          </span>
        </div>
      {% else %}
        <p style="font-size: 18px;">You have no posts yet. What are we paying you for?</p>
      {% endif %}
    </div>
  </section>
{% endblock %}